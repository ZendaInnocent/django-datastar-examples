{% extends "examples_base.html" %}

{% block content %}

  <div class="container py-5">
    <header class="mb-5">
      <h1 class="h2">Click to Load</h1>
      <p class="text-muted">
        Load more content when clicking "Load More" button (pagination)
      </p>
    </header>

    <section class="card shadow-sm mb-4">
      <div class="card-body">
        <h2 class="h5 mb-3">How it Works</h2>
        <ol class="text-muted small">
          <li>Initial page shows first 6 contacts</li>
          <li>Clicking "Load More" triggers a GET request with the next page number</li>
          <li>Server returns HTML fragments with more contacts</li>
          <li>
            Datastar appends new fragments to the list (using <code>id</code> merging)
          </li>
          <li>Button is removed when no more data exists</li>
        </ol>
      </div>
    </section>

    <div class="mb-4"
         data-signals="{page: 1, hasMore: `{{ contacts.has_next|lower }}`}">
      {% include 'examples/fragments/contact_list.html' %}
    </div>

    {% if contacts.has_next %}
      <div class="text-center my-4" id="load-more-container">
        <button class="btn btn-primary"
                data-show="$hasMore"
                data-on:click="$page=$page+1; @get('{% url "examples:click-to-load" %}');">
          Load More
        </button>
      </div>
    {% endif %}

    <section class="card shadow-sm mb-4">
      <div class="card-body">
        <h2 class="h5 mb-3">Learn More</h2>
        <ul class="mb-0">
          <li>
            <a href="" style="color: #6B46C1; text-decoration: none">Event Handling with data-on</a>
          </li>
          <li>
            <a href="" style="color: #6B46C1; text-decoration: none">Live Search Patterns</a>
          </li>
          <li>
            <a href="" style="color: #6B46C1; text-decoration: none">Server-Sent Events (SSE)</a>
          </li>
        </ul>
      </div>
    </section>
  </div>
{% endblock content %}
