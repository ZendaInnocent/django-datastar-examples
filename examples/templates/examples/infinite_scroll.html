{% extends "examples_base.html" %}

{% block content %}

  <div class="container py-5">
    <nav class="mb-4">
      <a href="{% url 'examples:index' %}" class="text-decoration-none">&larr; Back to Examples</a>
    </nav>

    <header class="mb-5">
      <h1 class="h2">Infinite Scroll</h1>
      <p class="text-muted">
        Automatically load more content when scrolling to bottom
      </p>
    </header>

    <section class="card shadow-sm mb-4">
      <div class="card-body">
        <h2 class="h5 mb-3">How it Works</h2>
        <ol class="text-muted small">
          <li>Initial page shows first 6 contacts</li>
          <li>Intersection observer watches for "sentinel" element at bottom</li>
          <li>When sentinel becomes visible, Datastar loads next page</li>
          <li>Server returns HTML fragments that are appended to the list</li>
          <li>Sentinel moves to bottom again for next scroll</li>
        </ol>
      </div>
    </section>

    {% include 'examples/fragments/contact_list.html' %}

    <div data-json-signals=""></div>
    <div id="sentinel"
         data-signals="{page: 1}"
         data-on:intersect="$page = $page + 1; @get('{% url "examples:infinite-scroll" %}')">
      <div class="text-center py-4">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
